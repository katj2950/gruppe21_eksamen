<!DOCTYPE html>
<html lang="da">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title></title>
	<style>
		nav ul {
			list-style: none;
		}

		nav li {
			margin: 0;
			padding: 0;
			display: inline-block;
		}

		nav a {
			margin: 0.5rem;
			padding: 1rem;
			background-color: papayawhip;
		}
	</style>
</head>

<body>
	<nav>

	</nav>
	<main>
		<h1 class="overskrift"></h1>
		<section class="liste">

			<template>
				<article class="ret">
					<h2 class="title"></h2>
					<img src="" alt="">
					<div class="beskrivelse"></div>
					<p class="pris"></p>
				</article>
			</template>
		</section>
	</main>


	<script>
		let retter;
		const url = "https://katjsoeg.dk/kea/03-CMS/babushkawp/wordpress/wp-json/wp/v2/retter";

		document.addEventListener("DOMContentLoaded", start);

		function start() {
			hentNav();
			hentJson();
		}

		async function hentNav() {
			const response = await fetch("inc/nav.html");
			const inclusion = await response.text();
			document.querySelector("nav").innerHTML = inclusion;
			console.log(inclusion);

		}

		async function hentJson() {
			const response = await fetch(url);
			console.log(response);

			retter = await response.json();
			console.log(retter);
			vis();
		}

		function vis() {

			const template = document.querySelector("template");
			const liste = document.querySelector(".liste");

			retter.forEach(ret => {


				console.log(ret);
				const klon = template.cloneNode(true).content;
				klon.querySelector(".title").textContent = ret.title.rendered;
				klon.querySelector(".pris").textContent = "Pris: DKK " + ret.pris + ",-";
				klon.querySelector("img").src = ret.billede.guid;
				klon.querySelector("img").alt = "billede af " + ret.title.rendered;
				klon.querySelector(".beskrivelse").innerHTML = ret.kort_tekst;
				liste.appendChild(klon);
			});


		}
	</script>

</body></html>
